import{State as a}from"./state.min.js";import{MESSAGES as n}from"./constants.min.js";import{MAX_IMAGE_SIZE as u}from"./constants.min.js";import{ProfileUtils as c}from"./profile.min.js";export const handleOutsideClick=(e,r,o=null)=>{if(!e||!r)return;const t=async s=>{const i=!e.contains(s.target),l=o&&s.target.closest(`.${o}`);(i||l)&&(document.removeEventListener("click",t),await r())};document.addEventListener("click",t,{once:!0})},formatTimestamp=e=>{if(!e)return"Invalid date";const r=new Date(e);if(isNaN(r.getTime()))return"Invalid date";const o={year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0};return r.toLocaleString(void 0,o)},getCookie=e=>{if(!e)return null;let r=null;if(document.cookie&&document.cookie!==""){const o=document.cookie.split(";");for(let t of o)if(t=t.trim(),t.startsWith(e+"=")){r=decodeURIComponent(t.slice(e.length+1));break}}return r},checkArgs=(e,r)=>{for(const[o,t]of Object.entries(e))if(t==null)return console.error(`${r}: Invalid arguments: key -> ${o}, value ->`,t),!1;return!0},awaitFrame=()=>new Promise(e=>requestAnimationFrame(e)),wait=e=>new Promise(r=>setTimeout(r,e)),clearElement=e=>{if(e)for(;e.firstChild;)e.removeChild(e.firstChild)},checkUserAuth=()=>a.userIsAuthenticated?!0:(c.showAuthModal(null,"login"),!1),scrollTop=()=>new Promise(e=>{if(window.scrollY<10)return e();const r=()=>{window.scrollY<10&&(window.removeEventListener("scroll",r),e())};window.addEventListener("scroll",r),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{window.scrollY<10&&(window.removeEventListener("scroll",r),e())},1e3)}),validateEmail=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{error:!1,message:null}:{error:!0,message:n.profile.errors.ui.INVALID_EMAIL},validateUsername=e=>!e||e.length>50||e.length<3?{error:!0,message:n.profile.errors.ui.USERNAME_ERROR}:{error:!1,message:null},validateImage=e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>u?{error:!0,message:"Image too big."}:{error:!1,message:null}:{error:!0,message:`Unsupported image format: ${e.type}`},validatePassword=(e,r)=>r&&e!=r?{error:!0,message:"Passwords must match."}:e.length<6?{error:!0,message:"Passwords must have at least 6 characters."}:{error:!1,message:null};