import{DOMUtils as g}from"./dom.min.js";import{Constants as m}from"./constants.min.js";export const createEl=({elType:a=null,className:n=null,textContent:e=null,color:o=null,value:t=null,disabled:l=!1,dataset:r={},attributes:p={}}={})=>{if(!a)return console.error("UI.createEl: Missing element type"),null;const s=document.createElement(a);if(n&&(s.className=n),e&&(s.textContent=e),o&&(s.style.color=o),t!=null&&(s.value=t),r&&typeof r=="object")for(const c in r)s.dataset[c]=r[c];if(p&&typeof p=="object")for(const[c,i]of Object.entries(p))s.setAttribute(c,i);return s.disabled=l,s},spinner=(a="38px")=>UI.createEl({elType:"div",className:"loading"}),createBaseModal=()=>{const a=createEl({elType:"div",className:"modal-overlay"}),n=createEl({elType:"div",className:"modal-container modal-container d-flex flex-column align-items-center"}),e=createEl({elType:"div",className:"modal-header"}),o=createEl({elType:"h2",className:"modal-title"}),t=createEl({elType:"div",className:"modal-body my-2"}),l=createEl({elType:"div",className:"d-flex justify-content-center g-2",attributes:{style:"gap: 12px;"}}),r=createEl({elType:"button",className:"btn btn-danger cancel-btn",textContent:"Cancel"}),p=UI.createEl({elType:"button",className:"btn btn-primary save-btn"});return e.append(o),l.append(p,r),n.append(e,t,l),a.append(n),r.addEventListener("click",()=>{g.closeModal()},{once:!0}),{modalOverlayEl:a,modalFooterEl:l,modalTitleEl:o,modalBodyEl:t,saveBtnEl:p,cancelBtnEl:r}},createDropdown=(a="POST")=>{const n=m.ACTIONS[a.toUpperCase()];if(!n)return console.error("UI.createDropdown: Invalid type:",a),null;const e=createEl({elType:"div",className:"dropdown-wrapper"}),o=createEl({elType:"button",className:"dots-btn",textContent:"...",dataset:{action:m.ACTIONS.POST.DROPDOWN}}),t=createEl({elType:"div",className:"dropdown-menu d-none"}),l=createEl({elType:"button",className:"dropdown-item edit",textContent:"Edit",dataset:{action:n.EDIT}}),r=createEl({elType:"button",className:"dropdown-item delete",textContent:"Delete",dataset:{action:n.DELETE}});return t.append(l,r),e.append(o,t),e},createPostLayout=()=>{const a=createEl({elType:"div",className:"post-wrapper row justify-content-center"}),n=createEl({elType:"div",className:"col-12 col-md-9 col-lg-7 col-xl-6"}),e=createEl({elType:"div",className:"post-card shadow border p-3"}),o=createEl({elType:"div",className:"post-body"}),t=createEl({elType:"div",className:"post-header d-flex justify-content-between align-items-center"}),l=createEl({elType:"div",className:"d-flex align-items-center"}),r=createEl({elType:"img",className:"post-profile-picture rounded-circle"}),p=createEl({elType:"h4",className:"post-user my-3 mx-2",dataset:{action:m.ACTIONS.POST.USER_PROFILE}}),s=createEl({elType:"h6",className:"post-content"}),c=createEl({elType:"p",className:"post-date"}),i=createEl({elType:"div",className:"post-footer mb-3 d-flex"}),d=createEl({elType:"span",className:"like-count"}),E=createEl({elType:"div",className:"like-container"}),T=createEl({elType:"i",dataset:{action:m.ACTIONS.POST.LIKE}}),u=createEl({elType:"span",className:"comment-count"}),f=createEl({elType:"div",className:"comment-icon-container",dataset:{action:m.ACTIONS.POST.COMMENTS}}),N=createEl({elType:"i",className:"fa-regular fa-comment"}),y=createEl({elType:"div",className:"post-comments d-none"}),b=createEl({elType:"div",className:"comment-input d-flex align-items-center justify-content-center"}),C=createEl({elType:"textarea",className:"form-control comment",attributes:{rows:"1",placeholder:"Write a new comment.",id:"comment-input"}}),x=createEl({elType:"button",textContent:"Send",className:"btn btn-primary",dataset:{action:m.ACTIONS.POST.CREATE_COMMENT}}),v=createEl({elType:"div",className:"comment-list"});return y.append(b,v),b.append(C,x),E.append(T,d),f.append(N,u),i.append(E,f),l.append(r,p),t.append(l),o.append(t,s,c,i,y),e.append(o),a.append(e),n.appendChild(e),a.appendChild(n),{postWrapperEl:a,postCardEl:e,postBodyEl:o,postHeaderEl:t,postUserEl:p,postContentEl:s,postDateEl:c,postFooterEl:i,likeCountEl:d,likeBtnEl:T,postProfilePictureEl:r,commentCountEl:u,commentListContainerEl:v}},createAuthModal=a=>{const n=createEl({elType:"div",className:"profile-edit-container d-block"}),e=createEl({elType:"form",className:"profile-edit-form"});n.append(e);const o=createEl({elType:"label",textContent:"Username: ",attributes:{for:"username"}}),t=createEl({elType:"input",className:"username-input form-control",attributes:{type:"text",name:"username",id:"username"}}),l=createEl({elType:"div",className:"form-group"});l.append(o,t),e.append(l);const r=a=="login"||a=="register";let p,s,c;if(r&&(p=createEl({elType:"input",className:"password-input form-control",attributes:{type:"password",name:"password",id:"password"}}),c=createEl({elType:"label",textContent:"Password: ",attributes:{for:"password"}}),s=createEl({elType:"div",className:"form-group my-3"}),s.append(c,p),e.append(l,s)),a=="login")return{profileEditContainerEl:n,profileEditFormEl:e,usernameInputLabelEl:o,usernameInputEl:t,usernameFormGroupEl:l,passwordInputLabelEl:c,passwordInputEl:p,passwordFormGroupEl:s};const i=createEl({elType:"img",className:"profile-picture profile-picture-preview rounded-circle mb-2",attributes:{src:""}}),d=createEl({elType:"div",className:"d-flex justify-content-center"}),E=createEl({elType:"label",textContent:"Profile Picture:",attributes:{for:"profile_picture"}}),T=createEl({elType:"input",className:"profile-picture-input",attributes:{type:"file",name:"profile_picture",id:"profile_picture",accept:"image/png, image/jpeg, image/jpg, image/webp"}}),u=createEl({elType:"div",className:"form-group my-3"});u.append(E,T),d.append(i),e.prepend(u),n.prepend(d);const f=createEl({elType:"label",textContent:"Email",attributes:{for:"email"}}),N=createEl({elType:"input",className:"email-input form-control",attributes:{type:"text",name:"email",id:"email"}}),y=createEl({elType:"div",className:"form-group my-3"});if(y.append(f,N),e.append(y),a=="edit-profile")return{profileEditContainerEl:n,profileEditFormEl:e,usernameInputLabelEl:o,usernameInputEl:t,usernameFormGroupEl:l,passwordInputLabelEl:c,passwordInputEl:p,passwordFormGroupEl:s,previewImgEl:i,previewImgContainerEl:d,ImageInputLabelEl:E,imageInputEl:T,imageFormGroupEl:u,emailInputLabelEl:f,emailInputEl:N,emailFormGroupEl:y};const b=createEl({elType:"label",textContent:"Confirm Password: ",attributes:{for:"confirmation"}}),C=createEl({elType:"input",className:"confirmation-input form-control",attributes:{type:"password",name:"confirmation",id:"confirmation"}}),x=createEl({elType:"div",className:"form-group my-3"});return x.append(b,C),s.after(x),n.append(e),{profileEditContainerEl:n,profileEditFormEl:e,usernameInputLabelEl:o,usernameInputEl:t,usernameFormGroupEl:l,passwordInputLabelEl:c,passwordInputEl:p,passwordFormGroupEl:s,previewImgEl:i,previewImgContainerEl:d,ImageInputLabelEl:E,imageInputEl:T,imageFormGroupEl:u,emailInputLabelEl:f,emailInputEl:N,emailFormGroupEl:y,confirmationInputLabelEl:b,confirmationInputEl:C,confirmationFormGroupEl:x}},createPostEditLayout=()=>{const a=createEl({elType:"textarea",className:"form-control post-edit-textarea"}),n=createEl({elType:"button",className:"btn btn-primary save-btn",textContent:"Save",dataset:{action:m.ACTIONS.POST.SAVE_EDIT}}),e=createEl({elType:"button",className:"btn btn-danger cancel-btn",textContent:"Cancel",dataset:{action:m.ACTIONS.POST.CANCEL_EDIT}}),o=createEl({elType:"div",className:"d-flex mt-3",attributes:{style:"gap: 12px; align-items: center;"}});o.append(n,e);const t=createEl({elType:"div",className:"post-edit-container"});return t.append(a,o),{textareaEl:a,postEditContainerEl:t}},createMainMessage=(a,n)=>{const e=createEl({elType:"div",className:`alert alert-${n} d-flex align-items-center justify-content-center p-3 border border-1 shadow w-50`,attributes:{role:"alert"}}),o=createEl({elType:"i",className:"fa-solid fa-circle-exclamation me-2"}),t=createEl({elType:"span",textContent:a});return e.append(o,t),e},createCommentLayout=()=>{const a=createEl({elType:"div",className:"comment-wrapper d-flex align-items-start p-2 border border-1 shadow"}),n=createEl({elType:"img",className:"comment-profile-picture rounded-circle my-1"}),e=createEl({elType:"div",className:"comment-body flex-grow-1 mx-2"}),o=createEl({elType:"div",className:"comment-header-wrapper d-flex justify-content-between align-items-start"}),t=createEl({elType:"div",className:"comment-header d-flex align-items-center"}),l=createEl({elType:"strong",className:"comment-author mx-2",dataset:{action:m.ACTIONS.POST.COMMENT_USER_PROFILE}}),r=createEl({elType:"span",className:"comment-text"}),p=createEl({elType:"small",className:"comment-timestamp mx-2"});return o.append(t),t.append(l,r),e.append(t,p),a.append(n,e),{commentWrapperEl:a,commentAvatarEl:n,commentAuthorEl:l,commentTextEl:r,commentTimestampEl:p,commentBodyEl:e,commentHeaderEl:t}},createCommentEditLayout=(a="")=>{const n=createEl({elType:"div",className:"comment-edit d-flex align-items-center flex-grow-1"}),e=createEl({elType:"textarea",className:"comment-textarea form-control form-control-sm flex-grow-1 me-2",textContent:a,rows:1}),o=createEl({elType:"button",className:"btn btn-sm btn-primary me-1",textContent:"Save",dataset:{action:m.ACTIONS.COMMENT.SAVE_EDIT}}),t=createEl({elType:"button",className:"btn btn-sm btn-danger",textContent:"Cancel",dataset:{action:m.ACTIONS.COMMENT.CANCEL_EDIT}});return n.append(e,o,t),{wrapperEl:n,textareaEl:e,saveBtnEl:o,cancelBtnEl:t}},UI={createEl,createBaseModal,createDropdown,createPostLayout,createAuthModal,createPostEditLayout,createMainMessage,createCommentLayout,createCommentEditLayout,spinner};